{% extends 'base.html' %}

{% block title %}ãƒ¬ãƒ“ãƒ¥ãƒ¼è©³ç´°{% endblock %}

{% block content %}
    <h1>ãƒ¬ãƒ“ãƒ¥ãƒ¼è©³ç´°</h1>

    <div class="review-container">
        <div class="review-header">
            <span class="review-user">ğŸ‘¤ {{ review.user.nickname }} ã•ã‚“</span>
            <span class="review-rating">
                {{ review.rating }} 
                {% for i in "12345" %}
                    {% if forloop.counter <= review.rating %}
                        â˜…
                    {% else %}
                        â˜†
                    {% endif %}
                {% endfor %}
            </span>
        </div>

        <div class="review-info">
            <p>å•†å“åï¼š {{ review.food.foods_name }}</p>
            <p>ã‚¸ãƒ£ãƒ³ãƒ«ï¼š {{ review.food.category.kind }}</p>
            <p>ãƒ‘ãƒ¼ã‚¯ï¼š {{ review.store.area.area_name }}</p>
            <p>åˆ©ç”¨ã—ãŸåº—èˆ—ï¼š {{ review.store.store_name }}</p>
            <p>æŠ•ç¨¿æ—¥ï¼š {{ review.created_at }}</p>
        </div>

        <div class="review-comment">
            <p>{{ review.comment }}</p>
        </div>

        <!-- ğŸ”¹ ç”»åƒä¸€è¦§ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§æ‹¡å¤§è¡¨ç¤ºï¼‰ -->
        <div class="review-images">
            {% for image in review.images.all|slice:":4" %}
                <img src="{{ image.review_image_path.url }}" alt="ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒ" class="review-thumbnail">
            {% endfor %}
            {% if review.images.all|length > 4 %}
                <div class="more-images">
                    <a href="#" onclick="showAllImages(event, '{{ review.id }}')">
                        ä»–{{ review.images.all|length|add:"-4" }}ä»¶
                    </a>
                </div>
            {% endif %}
        </div>

        <!-- æˆ»ã‚‹ãƒœã‚¿ãƒ³ -->
        {% if request.META.HTTP_REFERER and '/myreview/' in request.META.HTTP_REFERER %}
            <a href="{% url 'myreview' %}" class="back-link">ãƒã‚¤ãƒ¬ãƒ“ãƒ¥ãƒ¼ã«æˆ»ã‚‹</a>
        {% else %}
            <a href="{% url 'readingreview' %}" class="back-link">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸€è¦§ã«æˆ»ã‚‹</a>
        {% endif %}
    </div>

    <!-- ğŸ”¹ ç”»åƒæ‹¡å¤§ç”¨ã®ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="imageModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="modalImage">
    </div>
{% endblock %}
